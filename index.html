<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Automatic Method Generation from R6 • R62S3</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Automatic Method Generation from R6">
<meta property="og:description" content="After defining an R6 class, R62S3 is used to automatically generate optional S3/S4 generics and methods for dispatch. Also allows piping for R6 objects.">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">R62S3</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/RaphaelS1/R62S3">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="r62s3" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#r62s3" class="anchor"></a>R62S3 <img src="reference/figures/logo.png" align="right" alt="" width="120">
</h1></div>

<div id="what-is-r62s3" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-r62s3" class="anchor"></a>What is R62S3?</h2>
<p>R62S3 started as a single function, <code>R62S3</code>, and has since grown into two new functions called <code>R62S4</code> and <code>R62Fun</code> however instead of changing the original name, it remains as a legacy to the single function where it all began (also because it requires less pleading with CRAN).</p>
<p>R62S3 was created as a way to automatically generate S3 generics and dispatch methods from an R6ClassGenerator. This allows the user to build a fully R6 object-oriented programming interface alongside familiar S3 dispatch, but without the need to code hundreds of lines for each S3 method.</p>
<p>Unsurprisingly, R62S4 is an analogous function that creates S4 generics and methods instead of S3 ones.</p>
<p>R62Fun creates functions that aren’t necessarily dispatch methods. Additional arguments are used to specify what should happen if one of these functions could mask others or if generics exist.</p>
</div>
<div id="choosing-between-r62s3-r62s4-and-r62fun" class="section level2">
<h2 class="hasAnchor">
<a href="#choosing-between-r62s3-r62s4-and-r62fun" class="anchor"></a>Choosing between R62S3, R62S4 and R62Fun</h2>
<p>There are a few choices to make when deciding between which of these to implement, they mainly come down to when the function will be called, if the resulting assignments need to be documented and if generics are genuinely useful. We break down these decisions below to help you decide.</p>
<div id="when-will-the-function-be-called" class="section level3">
<h3 class="hasAnchor">
<a href="#when-will-the-function-be-called" class="anchor"></a>When will the function be called?</h3>
<p>In deciding which of the <code>R62</code> functions to use, the first consideration is when will it be called. For example will you be implementing it directly into your package (as below), which means that your package is shipped with the S3 methods, or will you direct the user to the function so that they can call it only if they choose. If you are giving the user the flexibility to choose, then you can also give them the option to choose any of three, however in this case only <code>R62Fun</code> should be required as the user can assign all methods to <code>.GlobalEnv</code> and will be able to see the names of all functions easily.</p>
</div>
<div id="documentation" class="section level3">
<h3 class="hasAnchor">
<a href="#documentation" class="anchor"></a>Documentation</h3>
<p>This section assumes that you are building a package to be exported to CRAN and that you are using roxygen for your documentation. In this case, roxygen requires quite strict conventions for function exporting. We have found that in practice it is next to impossible to dynamically assign S3 generics and methods to the package environment and successfully document the generics/methods in a way that allows I) correct documentation and II) the correct methods exported. S4 generics don’t have the same problem as S4 methods are automatically set to be in the same namespace as S4 generics and thus exported together. <code>R62Fun</code> doesn’t have this problem either as functions are dynamically assigned to the package namespace and exporting these functions can be done by documenting on a <code>NULL</code>. For example, if you are using <code>R62Fun</code> on a class with the function <code>printer</code> then you document the function that will be created as follows:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="op">@</span>name printer</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="op">@</span>title Printer Method</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">....</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="op">@</span>export</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="ot">NULL</span></a></code></pre></div>
</div>
<div id="is-a-generic-useful" class="section level3">
<h3 class="hasAnchor">
<a href="#is-a-generic-useful" class="anchor"></a>Is a generic useful?</h3>
<p>In choosing between the three functions, a big consideration is whether creating a new generic function is actually useful. All of these methods define the dispatch method (or function) in the same way, they all take the name of the function and pass it to the corresponding R6 class, so internally they look identical. The power of dispatch lies in the fact that methods with the same name can look the same externally but act differently internally, but in this case they all act the same internally! Therefore you should consider if creating a generic is useful. A generic is useful if you can answer the following two questions positively:</p>
<ol>
<li>The generic will be re-used by a non-R62S3/4 generated method somewhere else in the package</li>
<li>The generic will be re-used outside of the package (perhaps by being called from a different package) If you can answer ‘yes’ to both of these then use <code>R62S3</code> or <code>R62S4</code> otherwise <code>R62Fun</code> should suffice.</li>
</ol>
</div>
</div>
<div id="where-to-use-the-r62-family" class="section level2">
<h2 class="hasAnchor">
<a href="#where-to-use-the-r62-family" class="anchor"></a>Where to use the R62 family?</h2>
<p>If you are using a <code>R62</code> function in a package that will be exported and shared, I recommend creating a <code>zzz.R</code> file and adding the function there. This can either be done for specified classes:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">R62S3<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/R62S3/man/R62S3.html">R62S3</a></span>(yourR6Class, <span class="dt">assignEnvir =</span> <span class="kw"><a href="https://rdrr.io/r/base/ns-topenv.html">topenv</a></span>())</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="er">}</span></a></code></pre></div>
<p>Or for every R6 class:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/ls.html">ls</a></span>(<span class="dt">name=</span><span class="kw"><a href="https://rdrr.io/r/base/environment.html">parent.env</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/environment.html">environment</a></span>())),<span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">  <span class="cf">if</span>(<span class="kw"><a href="https://rdrr.io/r/base/class.html">inherits</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/get.html">get</a></span>(x),<span class="st">"R6ClassGenerator"</span>))</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">    R62S3<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/R62S3/man/R62S3.html">R62S3</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/get.html">get</a></span>(x),<span class="dt">assignEnvir =</span> <span class="kw"><a href="https://rdrr.io/r/base/ns-topenv.html">topenv</a></span>())</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">  })</a></code></pre></div>
<div id="distr6-use-case" class="section level3">
<h3 class="hasAnchor">
<a href="#distr6-use-case" class="anchor"></a>distr6 Use-Case</h3>
<p>To see <code>R62S3</code> in action, check out the <a href="https://CRAN.R-project.org/package=distr6">distr6</a> package (Sonabend and Kiraly, 2019). In <code>distr6</code> we use the <code>R62Fun</code> functions in our <code>zzz.R</code> file to generate S3 methods from specified R6 classes. This package also demonstrates how to document these functions.</p>
</div>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install from CRAN with</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"R62S3"</span>)</a></code></pre></div>
<p>Or the latest stable build from GitHub with</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">remotes<span class="op">::</span><span class="kw"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"RaphaelS1/R62S3"</span>)</a></code></pre></div>
<div id="acknowledgements" class="section level3">
<h3 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h3>
<p>Dr Franz Kiraly for initial discussions about the idea. <br> Prof. Dr. Peter Ruckdeschel for conversations that lead to a simplification in the code structure in earlier versions.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=R62S3">https://​cloud.r-project.org/​package=R62S3</a>
</li>
<li>Browse source code at <br><a href="https://github.com/RaphaelS1/R62S3">https://​github.com/​RaphaelS1/​R62S3</a>
</li>
<li>Report a bug at <br><a href="https://github.com/RaphaelS1/R62S3/issues">https://​github.com/​RaphaelS1/​R62S3/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Raphael Sonabend <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9225-4654" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.com/RaphaelS1/R62S3"><img src="https://travis-ci.com/RaphaelS1/R62S3.svg?branch=master" alt="Travis Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/RaphaelS1/r62s3"><img src="https://ci.appveyor.com/api/projects/status/olstl9l368ofl5el?svg=true" alt="Appveyor Build status"></a></li>
<li><a href="https://codecov.io/gh/RaphaelS1/R62S3"><img src="https://codecov.io/gh/RaphaelS1/R62S3/branch/master/graph/badge.svg" alt="codecov"></a></li>
<li><a href="https://img.shields.io/badge/lifecycle-stable-brightgreen"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle"></a></li>
<li><a href="https://cran.r-project.org/package=R62S3"><img src="https://www.r-pkg.org/badges/version-ago/R62S3" alt="CRAN Status Badge"></a></li>
<li><a href="https://cran.r-project.org/package=R62S3"><img src="https://cranlogs.r-pkg.org/badges/grand-total/R62S3" alt="CRAN Downloads"></a></li>
<li><a href="https://CRAN.R-project.org/package=R62S3"><img src="https://tinyverse.netlify.com/badge/R62S3" alt="Dependencies"></a></li>
<li><a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a></li>
<li><a href="https://cran.r-project.org/web/checks/check_results_R62S3.html"><img src="https://cranchecks.info/badges/summary/R62S3" alt="CRAN Checks"></a></li>
<li><a href="https://gitter.im/xoopR/community"><img src="https://badges.gitter.im/xoopR/community.png" alt="Gitter chat"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Raphael Sonabend.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
